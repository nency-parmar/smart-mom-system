generator client {
  provider        = "prisma-client"
  output          = "../lib/generated/prisma"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "mysql"
}

model MeetingMember {
  MeetingMemberID Int      @id @default(autoincrement())
  MeetingID       Int
  StaffID         Int
  IsPresent       Boolean  @default(false)
  Remarks         String?  @db.VarChar(255)
  Created         DateTime @default(now()) @db.DateTime(0)
  Modified        DateTime @default(now()) @db.DateTime(0)
  Meetings        Meetings @relation(fields: [MeetingID], references: [MeetingID], onDelete: Cascade, map: "fk_meetingmember_meeting")
  Staff           Staff    @relation(fields: [StaffID], references: [StaffID], map: "fk_meetingmember_staff")

  @@index([MeetingID], map: "fk_meetingmember_meeting")
  @@index([StaffID], map: "fk_meetingmember_staff")
}

model MeetingType {
  MeetingTypeID   Int        @id @default(autoincrement())
  MeetingTypeName String     @db.VarChar(100)
  Remarks         String?    @db.VarChar(255)
  Created         DateTime   @default(now()) @db.DateTime(0)
  Modified        DateTime   @default(now()) @db.DateTime(0)
  Meetings        Meetings[]
}

model Meetings {
  MeetingID            Int             @id @default(autoincrement())
  MeetingDate          DateTime        @db.DateTime(0)
  MeetingTypeID        Int
  MeetingDescription   String?         @db.VarChar(255)
  DocumentPath         String?         @db.VarChar(255)
  Created              DateTime        @default(now()) @db.DateTime(0)
  Modified             DateTime        @default(now()) @db.DateTime(0)
  IsCancelled          Boolean         @default(false)
  CancellationDateTime DateTime?       @db.DateTime(0)
  CancellationReason   String?         @db.VarChar(255)
  MeetingMember        MeetingMember[]
  MeetingType          MeetingType     @relation(fields: [MeetingTypeID], references: [MeetingTypeID], map: "fk_meetings_meetingtype")

  @@index([MeetingTypeID], map: "fk_meetings_meetingtype")
}

model Staff {
  StaffID       Int             @id @default(autoincrement())
  StaffName     String          @db.VarChar(150)
  MobileNo      String?         @db.VarChar(20)
  EmailAddress  String?         @db.VarChar(150)
  Remarks       String?         @db.VarChar(255)
  Created       DateTime        @default(now()) @db.DateTime(0)
  Modified      DateTime        @default(now()) @db.DateTime(0)
  Password      String?         @db.VarChar(50)
  Role          String?         @default("USER") @db.VarChar(20)
  LastLogin     DateTime?       @db.DateTime(0)
  MeetingMember MeetingMember[]
  UserActivity  UserActivity[]
}

model UserActivity {
  ActivityID   Int      @id @default(autoincrement())
  StaffID      Int
  ActivityType String   @db.VarChar(50) // 'LOGIN' or 'SIGNUP'
  Timestamp    DateTime @default(now()) @db.DateTime(0)
  Staff        Staff    @relation(fields: [StaffID], references: [StaffID], onDelete: Cascade)

  @@index([StaffID])
}

model Attendance {
  AttendanceID       Int       @id @default(autoincrement())
  MeetingID          String    @db.VarChar(20)
  MeetingDescription String?   @db.VarChar(255)
  MeetingDate        DateTime? @db.DateTime(0)
  MeetingTypeName    String?   @db.VarChar(100)
  StaffID            Int
  StaffName          String    @db.VarChar(100)
  IsPresent          Boolean?
  Remarks            String?   @db.VarChar(255)
  CreatedAt          DateTime? @default(now()) @db.Timestamp(0)
}

model departments {
  department_id   Int       @id @default(autoincrement())
  department_name String    @db.VarChar(100)
  remarks         String?   @db.VarChar(255)
  created_at      DateTime? @default(now()) @db.Timestamp(0)
  updated_at      DateTime? @default(now()) @db.Timestamp(0)
}

model venues {
  venue_id   String    @id @db.VarChar(10)
  venue_name String    @db.VarChar(100)
  capacity   Int
  location   String?   @db.VarChar(150)
  remarks    String?   @db.VarChar(255)
  created_at DateTime? @default(now()) @db.Timestamp(0)
  updated_at DateTime? @default(now()) @db.Timestamp(0)
}
